个人本地仓库与项目组仓库的管理规范

一、基本原则

1. 分离原则

• 个人本地仓库：个人开发环境，可自由实验和提交

• 项目组仓库：团队共享代码库，需遵守严格规范

2. 权限原则

• 主分支（main/master）保护：禁止直接推送

• 代码审查：所有变更必须通过Pull Request

• 权限分级：根据角色分配不同操作权限

二、分支管理策略

1. 分支命名规范


# 功能分支
feature/功能名称-日期  # feature/user-auth-20241201
feature/功能名称-issue编号  # feature/payment-integration-123

# 修复分支
fix/bug描述-日期  # fix/login-error-20241201
hotfix/紧急问题描述  # hotfix/critical-security-fix

# 发布分支
release/版本号  # release/v1.2.0


2. Git Flow工作流


main/master    (主分支，稳定版本)
  ↓
develop       (开发分支，集成功能)
  ↓
feature/*     (功能分支，个人开发)
hotfix/*      (热修复分支)
release/*     (发布准备分支)


三、个人本地仓库管理规范

1. 日常操作流程

# 1. 开始新功能前
git fetch origin  # 获取远程最新信息
git checkout develop
git pull origin develop  # 更新开发分支

# 2. 创建功能分支
git checkout -b feature/your-feature-name

# 3. 开发过程中的提交
git add .
git commit -m "feat: 添加用户认证功能

- 实现JWT令牌生成
- 添加登录接口
- 完善错误处理

关联issue: #123"


2. 提交信息规范


类型(范围): 简要描述

详细描述（可选）

- 变更点1
- 变更点2

关联issue: #123


提交类型说明：
• feat: 新功能

• fix: bug修复

• docs: 文档更新

• style: 代码格式调整

• refactor: 重构

• test: 测试相关

• chore: 构建过程或辅助工具变动

3. 本地分支维护

# 定期清理已合并的分支
git branch --merged | grep -v "\*" | xargs -n 1 git branch -d

# 更新远程分支信息
git fetch --prune

# 重base当前分支到develop
git rebase develop


四、项目组仓库协作规范

1. 代码推送规则

# 禁止直接推送到主分支
git config --global push.default simple

# 推送个人功能分支
git push -u origin feature/your-feature-name


2. Pull Request流程

创建PR前准备：
# 1. 确保本地分支基于最新的develop
git checkout develop
git pull origin develop
git checkout feature/your-feature
git rebase develop

# 2. 解决冲突（如果有）
git rebase --continue

# 3. 强制推送到远程（重base后需要）
git push -f origin feature/your-feature


PR描述模板：
## 变更描述
[详细描述本次PR的变更内容]

## 相关Issue
- Close #123
- Related #456

## 测试验证
- [ ] 单元测试通过
- [ ] 集成测试通过
- [ ] 手动测试验证

## 截图/录屏（如适用）
[添加相关截图或录屏]


3. 代码审查规范

审查者职责：
• 24小时内响应PR审查请求

• 检查代码质量和规范符合性

• 验证功能实现是否符合需求

• 确保测试覆盖充分

作者职责：
• 根据审查意见及时修改

• 回复每个审查评论

• 更新PR描述记录变更

五、版本发布管理

1. 版本号规范


主版本号.次版本号.修订号  # 1.2.3
- 主版本：不兼容的API修改
- 次版本：向下兼容的功能性新增
- 修订号：向下兼容的问题修正


2. 发布流程

# 1. 创建发布分支
git checkout -b release/v1.2.0 develop

# 2. 更新版本号和相关文档
# 3. 合并到main和develop
git checkout main
git merge --no-ff release/v1.2.0
git tag -a v1.2.0

git checkout develop
git merge --no-ff release/v1.2.0

# 4. 删除发布分支
git branch -d release/v1.2.0


六、配置文件规范

1. .gitignore配置


# 依赖文件
node_modules/
vendor/

# 环境配置
.env
.env.local

# 日志文件
*.log
logs/

# 系统文件
.DS_Store
Thumbs.db

# IDE文件
.vscode/
.idea/
*.swp
*.swo


2. Git钩子配置（.husky或.git/hooks）

#!/bin/bash
# pre-commit钩子示例：代码检查

# ESLint检查
npm run lint

# 单元测试
npm test

# 类型检查（TypeScript项目）
npm run type-check


七、异常情况处理

1. 代码冲突解决

# 1. 获取最新代码
git fetch origin

# 2. 重base或合并
git rebase origin/develop
# 或
git merge origin/develop

# 3. 解决冲突后
git add .
git rebase --continue  # 或 git commit

# 4. 推送更新
git push -f origin feature/your-feature


2. 错误提交处理

# 撤销最近一次提交（保持修改）
git reset --soft HEAD~1

# 撤销最近一次提交（丢弃修改）
git reset --hard HEAD~1

# 修改上次提交信息
git commit --amend


八、团队协作最佳实践

1. 沟通协调

• 每日站会同步开发进度

• 分支创建前在团队群中通知

• 重大架构变更提前讨论

2. 代码质量

• 遵循团队编码规范

• 编写有意义的提交信息

• 保证测试覆盖率

3. 文档维护

• 及时更新README.md

• 完善API文档

• 记录架构决策(ADR)

通过遵循这些规范，可以确保团队协作高效有序，代码质量可控，项目可维护性强。